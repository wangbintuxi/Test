import{_ as W,G as X,bB as Z,d as ee,l as r,r as ae,k as te,b2 as ne,bC as oe,o as T,q as $,m as n,i as a,n as le,f as i,bF as R,e as S,bd as se,w as re,t as ie,x as _,D as ue,bf as ce,bL as de,b3 as pe}from"./index.eed59c8a.js";import{_ as _e}from"./index.ce53685a.js";import{_ as me}from"./index.dc2e029d.js";/* empty css              */import{R as fe}from"./index.2ea918c2.js";import{C as ge}from"./index.dbfe01a9.js";import{b as ve}from"./shopManage.6f619721.js";import{l as he,g as ye}from"./financeManage.468b203b.js";import be from"./shopTree.e9cf4ebf.js";import{_ as xe}from"./RadioButton.a28003a6.js";import"./index.60929ff8.js";import{_ as we,a as Se}from"./index.bd68bfa1.js";import{_ as Ce,F as Ne}from"./Form.ebe4e7a6.js";import"./index.e50e374b.js";import"./Group.69eabd48.js";import"./Search.63c74586.js";import"./isPlainObject.e1353217.js";import"./Password.525a1a03.js";const ze=_(" \u641C\u7D22 "),Ie=_(" \u91CD\u7F6E "),ke=_("\u5168\u90E8"),Ae=_("\u6536\u5165"),De=_("\u652F\u51FA"),Te=_(" \u5BFC\u51FA "),$e={style:{padding:"0 10px","font-weight":"bold"}},Re=X({name:"bill"}),qe=Object.assign(Re,{setup(Oe){const{proxy:C}=pe(),N=Z(),q=ee({get(){return N.size},set(e){N.setSize(e)}}),O=r(!0),h=r("\u4EA4\u6613\u7B14\u6570\u30100\u3011"),f=r([]),z=r([]),y=r(!1),b=r(!0),I=r(0),Y=ae({selectedRowKeys:[],dateRange:[],typeAccount:"0",queryParams:{pageNum:1,pageSize:10,shopId:void 0,orderNumber:void 0,type:null,startTime:void 0,endTime:void 0},columns:[{title:"\u95E8\u5E97\u540D\u79F0",dataIndex:"storeName",align:"center"},{title:"\u95E8\u5E97\u7B80\u79F0",dataIndex:"aliasName",align:"center"},{title:"\u4EA4\u6613\u65F6\u95F4",dataIndex:"createTime",align:"center"},{title:"\u4EA4\u6613\u7C7B\u578B",dataIndex:"transactionType",align:"center"},{title:"\u8BA2\u5355\u53F7",dataIndex:"orderNumber",align:"center"},{title:"\u8BA2\u5355\u91D1\u989D",dataIndex:"orderAmount",ellipsis:!0,align:"center"},{title:"\u4EA4\u6613\u91D1\u989D",dataIndex:"transactionAmount",ellipsis:!0,align:"center"},{title:"\u94F6\u884C\u624B\u7EED\u8D39",dataIndex:"bankCharges",ellipsis:!0,align:"center"},{title:"\u7ED3\u7B97\u91D1\u989D",dataIndex:"settlementAmount",ellipsis:!0,align:"center"},{title:"\u4F18\u60E0\u91D1\u989D",dataIndex:"preferentialAmount",ellipsis:!0,align:"center"},{title:"\u5C0F\u8D39",dataIndex:"tips",ellipsis:!0,align:"center"},{title:"\u5907\u6CE8",dataIndex:"remarks",ellipsis:!0,align:"center"}]}),{dateRange:u,typeAccount:x,queryParams:o,columns:B}=te(Y),c=()=>{b.value=!0,o.value.startTime=u.value[0],o.value.endTime=u.value[1],he(o.value).then(e=>{z.value=e.data.rows.map(t=>(t.createTime=t.transactionDate+" "+t.transactionTime,t)),I.value=e.data.total,b.value=!1}),ye(o.value).then(e=>{var t,l,s,g,v,d,p;e.data.transactions?h.value=`\u4EA4\u6613\u7B14\u6570\u3010${(t=e.data.transactions)!=null?t:""}\u3011 \u4EA4\u6613\u91D1\u989D\u3010${(l=e.data.transactionAmount)!=null?l:""}\u3011 \u624B\u7EED\u8D39\u3010${(s=e.data.bankCharges)!=null?s:""}\u3011 \u7ED3\u7B97\u91D1\u989D\u3010${(g=e.data.settlementAmount)!=null?g:""}\u3011 \u4F18\u60E0\u7B14\u6570\u3010${(v=e.data.numberOfConcessions)!=null?v:""}\u3011 \u4F18\u60E0\u91D1\u989D\u3010${(d=e.data.preferentialAmount)!=null?d:""}\u3011`:h.value=`\u4EA4\u6613\u7B14\u6570\u3010${(p=e.data.transactions)!=null?p:""}\u3011`})},k=()=>{o.value.pageNum=1,c()},F=()=>{u.value=[],C.resetForm("queryRef"),k()},P=e=>{console.log(e),o.value.type=e.target.value==="0"?null:e.target.value,o.value.pageNum=1,c()},L=(e,t)=>{o.value.pageSize=t,c()},M=(e,t)=>{o.value.pageNum=e,o.value.pageSize=t,c()},E=e=>{o.value.shopId=e=="0-0"?void 0:e,o.value.pageNum=1,c()},V=()=>{C.download("/maiquxinyu/account/export",{...o.value},`account_${new Date().getTime()}.xlsx`)};c();const A=()=>{ve().then(e=>{let t=e.data;Array.isArray(t)&&t.forEach(l=>{var s;l.shopName=`${l.shopName}(${(s=l.aliasName)!=null?s:""})`}),f.value=[{shopId:"0-0",shopName:"\u5168\u90E8",children:t}]})};A();function j(e){let t=JSON.parse(JSON.stringify(f.value[0].children));if(e==""||e==null||e==null)A();else{let l=[];t.forEach(s=>{s.shopName.indexOf(e)>-1&&l.push(s)}),f.value=[{shopId:"0-0",shopName:"\u5168\u90E8",children:l}]}}return(e,t)=>{const l=ge,s=we,g=fe,v=Ce,d=ne("c-icon"),p=ue,J=ce,D=Se,K=Ne,w=xe,Q=me,U=_e,G=de,H=oe("hasPermi");return T(),$(D,{wrap:""},{default:n(()=>[a(s,{span:4},{default:n(()=>[a(l,{bordered:!1,class:"card",size:"small"},{default:n(()=>[a(be,{"shop-options":f.value,onSelect:E,onSelClick:j},null,8,["shop-options"])]),_:1})]),_:1}),a(s,{span:20},{default:n(()=>[a(l,{bordered:!1,class:le(["card card-search",{"p-0":!y.value}]),size:"small"},{default:n(()=>[a(K,{class:"search-form",model:i(o),ref:"queryRef","label-col":{span:8},"wrapper-col":{span:16}},{default:n(()=>[a(D,{gutter:24},{default:n(()=>[a(s,{md:8,sm:24},{default:n(()=>[a(v,{label:"\u8D26\u5355\u65E5\u671F"},{default:n(()=>[a(g,{allowClear:"",style:{width:"100%"},value:i(u),"onUpdate:value":t[0]||(t[0]=m=>R(u)?u.value=m:null),placeholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"],format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD"},null,8,["value"])]),_:1})]),_:1}),a(s,{md:!y.value&&8||8,sm:24},{default:n(()=>[S("span",{style:se(y.value&&{float:"right",overflow:"hidden"}||{})},[a(J,null,{default:n(()=>[a(p,{type:"primary",onClick:k},{default:n(()=>[a(d,{type:"SearchOutlined"}),ze]),_:1}),a(p,{onClick:F},{default:n(()=>[a(d,{type:"SyncOutlined"}),Ie]),_:1})]),_:1})],4)]),_:1},8,["md"])]),_:1})]),_:1},8,["model"])]),_:1},8,["class"]),a(l,{bordered:!1,class:"card",size:"small"},{default:n(()=>[S("div",null,[a(Q,{value:i(x),"onUpdate:value":t[1]||(t[1]=m=>R(x)?x.value=m:null),onChange:P,style:{"margin-bottom":"16px"}},{default:n(()=>[a(w,{value:"0"},{default:n(()=>[ke]),_:1}),a(w,{value:"1"},{default:n(()=>[Ae]),_:1}),a(w,{value:"2"},{default:n(()=>[De]),_:1})]),_:1},8,["value"]),re((T(),$(p,{class:"is-plain float-right",type:"warn",onClick:V},{default:n(()=>[a(d,{type:"CloudDownloadOutlined"}),Te]),_:1})),[[H,["maiquxinyu:account:export"]]])]),a(U,{loading:b.value,size:i(q),rowKey:"id",columns:i(B),"data-source":z.value,pagination:!1,bordered:O.value},{title:n(()=>[S("div",$e,ie(h.value),1)]),_:1},8,["loading","size","columns","data-source","bordered"]),a(G,{class:"ant-table-pagination float-right","show-size-changer":"","show-quick-jumper":"",current:i(o).pageNum,total:I.value,"page-size":i(o).pageSize,"show-total":m=>`\u5171 ${m} \u6761`,onShowSizeChange:L,onChange:M},null,8,["current","total","page-size","show-total"])]),_:1})]),_:1})]),_:1})}}});var ea=W(qe,[["__scopeId","data-v-68569e36"]]);export{ea as default};
