import{_ as F,l as h,az as S,r as j,k as q,b2 as z,o as E,c as M,e as y,i as l,f,bF as R,m as u,q as H,s as L,x as A,cL as U,c5 as G,c6 as J,cf as Q,ch as W}from"./index.b2a8007e.js";import{_ as X}from"./Search.0f62a307.js";import"./index.396ac728.js";import"./isPlainObject.87445d09.js";import"./Group.2e989739.js";import"./Password.f34c4271.js";const Y={class:"flex justify-between justify-center sel"},Z=A("\u5C55\u5F00\u5168\u90E8"),$=A("\u6298\u53E0\u5168\u90E8"),ee={class:"tree"},te={class:"example"},ne={__name:"shopTree",props:{shopOptions:{type:Array,required:!0}},emits:["select"],setup(g,{emit:k}){const o=g,v=h(!0);S(()=>o.shopOptions,(e,t)=>{if(e.length>0){v.value=!1,_(o.shopOptions);const a=o.shopOptions,s=p.value.map(n=>r(n.id,a));c.value=s}});const K=h(null),N=h(!1),O=h("isAll"),V=j({replaceFields:{children:"children",title:"shopName",key:"shopId",value:"shopId"},deptNodes:[],expandedKeys:[],searchValue:"",autoExpandParent:!0,defaultExpandAll:!1}),{replaceFields:b,deptNodes:p,expandedKeys:c,searchValue:i,autoExpandParent:m,defaultExpandAll:ae}=q(V),r=(e,t)=>{let a;for(let s=0;s<t.length;s++){const n=t[s];n.children&&(n.children.some(d=>d.shopId===e)?a=n.shopId:r(e,n.children)&&(a=r(e,n.children)))}return a},C=e=>{_(o.shopOptions);const t=e.target.value,a=o.shopOptions,s=p.value.map(n=>n.label.indexOf(t)>-1?r(n.id,a):null).filter((n,d,x)=>n&&x.indexOf(n)===d);i.value=t,c.value=s,m.value=!0,p.value=[],k("sel-click",t)},I=e=>{if(O.value=e.key,e.key==="isAll"){_(o.shopOptions);const t=o.shopOptions,a=p.value.map(s=>r(s.id,t));c.value=a}else c.value=[];N.value=!N.value,p.value=[]},_=e=>{if(!e||e.length===0)return[];e.forEach(t=>(p.value.push({id:t.shopId,label:t.shopName}),_(t.children)))},w=(e,t)=>{k("select",e[0])},D=e=>{c.value=e,m.value=!1};return(e,t)=>{const a=X,s=z("c-icon"),n=U,d=G,x=J,P=Q,T=W;return E(),M("div",null,[y("div",Y,[l(a,{value:f(i),"onUpdate:value":t[0]||(t[0]=B=>R(i)?i.value=B:null),placeholder:"\u8BF7\u8F93\u5165\u95E8\u5E97\u540D\u79F0",onChange:C},null,8,["value"]),l(x,null,{overlay:u(()=>[l(d,{"selected-keys":[O.value],onClick:I},{default:u(()=>[l(n,{key:"isAll"},{default:u(()=>[Z]),_:1}),l(n,{key:"noAll"},{default:u(()=>[$]),_:1})]),_:1},8,["selected-keys"])]),default:u(()=>[l(s,{type:"MoreOutlined",style:{fontSize:"24px",height:"100 %"}})]),_:1})]),y("div",ee,[v.value?L("",!0):(E(),H(P,{key:0,class:"pt-10",ref_key:"tree",ref:K,expandedKeys:f(c),autoExpandParent:f(m),"default-expand-all":"","tree-data":g.shopOptions,fieldNames:f(b),onSelect:w,onExpand:D},null,8,["expandedKeys","autoExpandParent","tree-data","fieldNames"]))]),y("div",te,[l(T,{spinning:v.value},null,8,["spinning"])])])}}};var de=F(ne,[["__scopeId","data-v-50b9ca12"]]);export{de as default};
