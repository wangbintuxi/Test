import{_ as Q,G,bB as H,d as W,l as c,r as X,k as Z,b2 as ee,bC as ae,o as A,q as R,m as n,i as t,n as te,f as i,bF as S,e as w,bd as ne,w as oe,t as le,x as z,b3 as se,D as ie,bf as re,bJ as ce,bL as ue}from"./index.bde4a40f.js";import{_ as de}from"./index.b299fc45.js";import"./index.e162e362.js";/* empty css              */import{R as pe}from"./index.cfb0be37.js";import{C as me}from"./index.ec64e5cc.js";import{a as _e,b as fe}from"./financeManage.1dcacdea.js";import{b as ge}from"./shopManage.79e4811a.js";import ve from"./shopTree.733ce56a.js";import{_ as he,a as be}from"./index.20aec7d3.js";import{_ as xe,F as ye}from"./Form.9957df10.js";import"./index.094c9c57.js";import"./RadioButton.41d4890b.js";import"./index.5d20d864.js";import"./Group.12a87c6f.js";import"./Search.26e235a2.js";import"./isPlainObject.46058b4b.js";import"./Password.f10fa33a.js";const Ce=z(" \u641C\u7D22 "),Se=z(" \u91CD\u7F6E "),we={class:"table-operations"},ze=z(" \u5BFC\u51FA "),Ne={style:{padding:"0 10px","font-weight":"bold"}},Ie=G({name:"ccb"}),ke=Object.assign(Ie,{setup(De){const{proxy:x}=se();x.useDict("bill_type","bill_vocational");const N=H(),_=W({get(){return N.size},set(e){N.setSize(e)}}),B=c(!0),f=c([]),y=c("\u4EA4\u6613\u7B14\u6570\u30100\u3011"),I=c([]),C=c(!1),g=c(!0),k=c(0),q=X({selectedRowKeys:[],dateRange:[],queryParams:{pageNum:1,pageSize:10,shopId:void 0,orderNumber:void 0,status:null,vocational:null,startTime:void 0,endTime:void 0},columns:[{title:"\u95E8\u5E97\u540D\u79F0",dataIndex:"storeName",align:"center"},{title:"\u95E8\u5E97\u7B80\u79F0",dataIndex:"aliasName",align:"center"},{title:"\u4EA4\u6613\u65F6\u95F4",dataIndex:"createTime",align:"center"},{title:"\u4EA4\u6613\u7C7B\u578B",dataIndex:"transactionType",align:"center"},{title:"\u8BA2\u5355\u53F7",dataIndex:"orderNumber",align:"center"},{title:"\u8BA2\u5355\u91D1\u989D",dataIndex:"orderAmount",ellipsis:!0,align:"center"},{title:"\u4EA4\u6613\u91D1\u989D",dataIndex:"transactionAmount",ellipsis:!0,align:"center"},{title:"\u94F6\u884C\u624B\u7EED\u8D39",dataIndex:"bankCharges",ellipsis:!0,align:"center"},{title:"\u7ED3\u7B97\u91D1\u989D",dataIndex:"settlementAmount",ellipsis:!0,align:"center"},{title:"\u4F18\u60E0\u91D1\u989D",dataIndex:"preferentialAmount",ellipsis:!0,align:"center"},{title:"\u5C0F\u8D39",dataIndex:"tips",ellipsis:!0,align:"center"},{title:"\u5907\u6CE8",dataIndex:"remarks",ellipsis:!0,align:"center"}]}),{dateRange:u,queryParams:o,columns:v}=Z(q),d=()=>{g.value=!0,o.value.startTime=u.value[0],o.value.endTime=u.value[1],_e(o.value).then(e=>{I.value=e.data.rows.map(a=>(a.createTime=a.transactionDate+" "+a.transactionTime,a)),k.value=e.data.total,g.value=!1}),fe(o.value).then(e=>{var a,l,s,h,b,p,m;e.data.transactions?y.value=`\u4EA4\u6613\u7B14\u6570\u3010${(a=e.data.transactions)!=null?a:""}\u3011 \u4EA4\u6613\u91D1\u989D\u3010${(l=e.data.transactionAmount)!=null?l:""}\u3011 \u624B\u7EED\u8D39\u3010${(s=e.data.bankCharges)!=null?s:""}\u3011 \u7ED3\u7B97\u91D1\u989D\u3010${(h=e.data.settlementAmount)!=null?h:""}\u3011 \u4F18\u60E0\u7B14\u6570\u3010${(b=e.data.numberOfConcessions)!=null?b:""}\u3011 \u4F18\u60E0\u91D1\u989D\u3010${(p=e.data.preferentialAmount)!=null?p:""}\u3011`:y.value=`\u4EA4\u6613\u7B14\u6570\u3010${(m=e.data.transactions)!=null?m:""}\u3011`})},D=()=>{o.value.pageNum=1,d()},O=()=>{u.value=[],x.resetForm("queryRef"),D()},Y=(e,a)=>{o.value.pageSize=a,d()},F=(e,a)=>{o.value.pageNum=e,o.value.pageSize=a,d()},L=e=>{o.value.shopId=e=="0-0"?void 0:e,o.value.pageNum=1,d()},P=()=>{x.download("/maiquxinyu/account/exportCCBLife",{...o.value},`ccb_${new Date().getTime()}.xlsx`)};d();const T=()=>{ge().then(e=>{let a=e.data;Array.isArray(a)&&a.forEach(l=>{var s;l.shopName=`${l.shopName}(${(s=l.aliasName)!=null?s:""})`}),f.value=[{shopId:"0-0",shopName:"\u5168\u90E8",children:a}]})};T();function M(e){let a=JSON.parse(JSON.stringify(f.value[0].children));if(e==""||e==null||e==null)T();else{let l=[];a.forEach(s=>{s.shopName.indexOf(e)>-1&&l.push(s)}),f.value=[{shopId:"0-0",shopName:"\u5168\u90E8",children:l}]}}return(e,a)=>{const l=me,s=he,h=pe,b=xe,p=ee("c-icon"),m=ie,E=re,$=be,J=ye,U=ce,V=de,j=ue,K=ae("hasPermi");return A(),R($,{wrap:""},{default:n(()=>[t(s,{span:4},{default:n(()=>[t(l,{bordered:!1,class:"card",size:"small"},{default:n(()=>[t(ve,{"shop-options":f.value,onSelect:L,onSelClick:M},null,8,["shop-options"])]),_:1})]),_:1}),t(s,{span:20},{default:n(()=>[t(l,{bordered:!1,class:te(["card card-search",{"p-0":!C.value}]),size:"small"},{default:n(()=>[t(J,{class:"search-form",model:i(o),ref:"queryRef","label-col":{span:8},"wrapper-col":{span:16}},{default:n(()=>[t($,{gutter:24},{default:n(()=>[t(s,{md:8,sm:24},{default:n(()=>[t(b,{label:"\u4EA4\u6613\u65F6\u95F4"},{default:n(()=>[t(h,{allowClear:"",style:{width:"100%"},value:i(u),"onUpdate:value":a[0]||(a[0]=r=>S(u)?u.value=r:null),placeholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"],format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD"},null,8,["value"])]),_:1})]),_:1}),t(s,{md:!C.value&&8||8,sm:24},{default:n(()=>[w("span",{style:ne(C.value&&{float:"right",overflow:"hidden"}||{})},[t(E,null,{default:n(()=>[t(m,{type:"primary",onClick:D},{default:n(()=>[t(p,{type:"SearchOutlined"}),Ce]),_:1}),t(m,{onClick:O},{default:n(()=>[t(p,{type:"SyncOutlined"}),Se]),_:1})]),_:1})],4)]),_:1},8,["md"])]),_:1})]),_:1},8,["model"])]),_:1},8,["class"]),t(l,{bordered:!1,class:"card",size:"small"},{default:n(()=>[w("div",we,[oe((A(),R(m,{class:"is-plain",type:"warn",onClick:P},{default:n(()=>[t(p,{type:"CloudDownloadOutlined"}),ze]),_:1})),[[K,["maiquxinyu:account:exportCCBLife"]]]),t(U,{class:"float-right",columns:i(v),"onUpdate:columns":a[1]||(a[1]=r=>S(v)?v.value=r:null),tableSize:i(_),"onUpdate:tableSize":a[2]||(a[2]=r=>S(_)?_.value=r:null),"refresh-loading":g.value,onRefresh:d},null,8,["columns","tableSize","refresh-loading"])]),t(V,{loading:g.value,size:i(_),rowKey:"id",columns:i(v),"data-source":I.value,pagination:!1,bordered:B.value},{title:n(()=>[w("div",Ne,le(y.value),1)]),_:1},8,["loading","size","columns","data-source","bordered"]),t(j,{class:"ant-table-pagination float-right","show-size-changer":"","show-quick-jumper":"",current:i(o).pageNum,total:k.value,"page-size":i(o).pageSize,"show-total":r=>`\u5171 ${r} \u6761`,onShowSizeChange:Y,onChange:F},null,8,["current","total","page-size","show-total"])]),_:1})]),_:1})]),_:1})}}});var Qe=Q(ke,[["__scopeId","data-v-36457be0"]]);export{Qe as default};
