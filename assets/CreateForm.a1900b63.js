import{l as k,r as O,k as z,b2 as H,o as g,q as F,m as o,i as e,f as l,c as M,bD as Q,x as s,t as K,F as W,e as c,be as C,I as X,bH as Y,bI as Z,bu as ee,D as oe,bf as ne,d7 as te,b3 as le}from"./index.eed59c8a.js";/* empty css              */import{_ as ae}from"./index.dc2e029d.js";import se from"./ShowCron.bd91107d.js";import{g as re,u as ue,a as ie}from"./job.e515d67c.js";import{_ as _e,F as de}from"./Form.ebe4e7a6.js";import{_ as pe}from"./Group.69eabd48.js";import{_ as ce}from"./RadioButton.a28003a6.js";/* empty css               */import"./index.dbfe01a9.js";import"./index.bd68bfa1.js";import"./isPlainObject.e1353217.js";import"./index.4efc3d67.js";const me=s(" Bean\u8C03\u7528\u793A\u4F8B\uFF1AryTask.ryParams('ry') "),fe=c("br",null,null,-1),ve=s(" Class\u7C7B\u8C03\u7528\u793A\u4F8B\uFF1Acom.ruoyi.quartz.task.RyTask.ryParams('ry') "),be=c("br",null,null,-1),ge=s(" \u53C2\u6570\u8BF4\u660E\uFF1A\u652F\u6301\u5B57\u7B26\u4E32\uFF0C\u5E03\u5C14\u7C7B\u578B\uFF0C\u957F\u6574\u578B\uFF0C\u6D6E\u70B9\u578B\uFF0C\u6574\u578B "),ye=c("span",{class:"pl-4"},"\u8C03\u7528\u65B9\u6CD5",-1),he=s("\u751F\u6210\u8868\u8FBE\u5F0F"),je=s("\u7ACB\u5373\u6267\u884C"),ke=s("\u6267\u884C\u4E00\u6B21"),Fe=s("\u653E\u5F03\u6267\u884C"),Ce=s("\u5141\u8BB8"),we=s("\u7981\u6B62"),xe={class:"bottom-control"},Te=s("\u53D6\u6D88"),Ie=s("\u4FDD\u5B58"),Se={__name:"CreateForm",props:{sys_job_group:{type:Array,required:!0},sys_job_status:{type:Array,required:!0}},emits:["ok"],setup(y,{expose:w,emit:h}){const x=k(null),T=k(null),{proxy:I}=le(),N=O({formTitle:"",submitLoading:!1,form:{jobLogId:null,jobName:null,jobGroup:null,invokeTarget:null,jobMessage:null,status:"0",exceptionInfo:null,createTime:null},open:!1,rules:{jobName:[{required:!0,message:"\u4EFB\u52A1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],invokeTarget:[{required:!0,message:"\u8C03\u7528\u76EE\u6807\u5B57\u7B26\u4E32\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],cronExpression:[{required:!0,message:"cron\u6267\u884C\u8868\u8FBE\u5F0F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}]}}),{formTitle:m,submitLoading:p,form:n,open:i,rules:U}=z(N),j=()=>{f(),i.value=!1},f=()=>{n.value={jobId:void 0,jobName:void 0,jobGroup:void 0,invokeTarget:void 0,cronExpression:void 0,misfirePolicy:"1",concurrent:"1",status:"0"},I.resetForm("formRef")},q=()=>{f(),i.value=!0,m.value="\u6DFB\u52A0\u5B9A\u65F6\u4EFB\u52A1"},E=r=>{f();const t=r.jobId;re(t).then(_=>{n.value=_.data,i.value=!0,m.value="\u4FEE\u6539\u5B9A\u65F6\u4EFB\u52A1"})},B=r=>{n.value.cronExpression=r},P=r=>{p.value=!0,n.value.jobId!==void 0&&n.value.jobId!==null?ue(n.value).then(t=>{C.success("\u4FEE\u6539\u6210\u529F",3),i.value=!1,h("ok")}).finally(()=>{p.value=!1}):ie(n.value).then(t=>{C.success("\u65B0\u589E\u6210\u529F",3),i.value=!1,h("ok")}).finally(()=>{p.value=!1})},$=r=>{console.error("\u6570\u636E\u9A8C\u8BC1\u5931\u8D25",r)};return w({handleAdd:q,handleUpdate:E}),(r,t)=>{const _=X,u=_e,G=Y,R=Z,L=H("c-icon"),A=ee,v=oe,D=pe,d=ce,b=ae,J=ne,S=de,V=te;return g(),F(V,{width:600,title:l(m),"label-col":4,"wrapper-col":14,visible:l(i),onClose:j},{default:o(()=>[e(S,{"label-col":{span:5},"wrapper-col":{span:18},ref_key:"formRef",ref:x,model:l(n),rules:l(U),onFinish:P,onFinishFailed:$},{default:o(()=>[e(u,{label:"\u4EFB\u52A1\u540D\u79F0",name:"jobName"},{default:o(()=>[e(_,{value:l(n).jobName,"onUpdate:value":t[0]||(t[0]=a=>l(n).jobName=a),placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0"},null,8,["value"])]),_:1}),e(u,{label:"\u4EFB\u52A1\u7EC4\u540D",name:"jobGroup"},{default:o(()=>[e(R,{value:l(n).jobGroup,"onUpdate:value":t[1]||(t[1]=a=>l(n).jobGroup=a),placeholder:"\u8BF7\u9009\u62E9",allowClear:""},{default:o(()=>[(g(!0),M(W,null,Q(y.sys_job_group,a=>(g(),F(G,{value:a.value,key:a.value},{default:o(()=>[s(K(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),e(u,{name:"invokeTarget"},{label:o(()=>[e(A,{placement:"top"},{title:o(()=>[me,fe,ve,be,ge]),default:o(()=>[e(L,{type:"QuestionCircleFilled"})]),_:1}),ye]),default:o(()=>[e(_,{value:l(n).invokeTarget,"onUpdate:value":t[2]||(t[2]=a=>l(n).invokeTarget=a),placeholder:"\u8BF7\u8F93\u5165\u8C03\u7528\u76EE\u6807\u5B57\u7B26\u4E32","allow-clear":""},null,8,["value"])]),_:1}),e(u,{label:"cron\u8868\u8FBE\u5F0F",name:"cronExpression"},{default:o(()=>[e(D,{compact:""},{default:o(()=>[e(_,{value:l(n).cronExpression,"onUpdate:value":t[3]||(t[3]=a=>l(n).cronExpression=a),style:{width:"calc(100% - 102px)"},"allow-clear":"",placeholder:"\u8BF7\u8F93\u5165cron\u6267\u884C\u8868\u8FBE\u5F0F\u8F93\u5165cron\u6267\u884C\u8868\u8FBE\u5F0F"},null,8,["value"]),e(v,{type:"primary",onClick:t[4]||(t[4]=a=>r.$refs.showCron.handleShowCron(l(n)))},{default:o(()=>[he]),_:1})]),_:1})]),_:1}),e(u,{label:"\u6267\u884C\u7B56\u7565",name:"misfirePolicy"},{default:o(()=>[e(b,{value:l(n).misfirePolicy,"onUpdate:value":t[5]||(t[5]=a=>l(n).misfirePolicy=a),"button-style":"solid"},{default:o(()=>[e(d,{value:"1"},{default:o(()=>[je]),_:1}),e(d,{value:"2"},{default:o(()=>[ke]),_:1}),e(d,{value:"3"},{default:o(()=>[Fe]),_:1})]),_:1},8,["value"])]),_:1}),e(u,{label:"\u662F\u5426\u5E76\u53D1",name:"concurrent"},{default:o(()=>[e(b,{value:l(n).concurrent,"onUpdate:value":t[6]||(t[6]=a=>l(n).concurrent=a),"button-style":"solid"},{default:o(()=>[e(d,{value:"0"},{default:o(()=>[Ce]),_:1}),e(d,{value:"1"},{default:o(()=>[we]),_:1})]),_:1},8,["value"])]),_:1}),e(u,{label:"\u72B6\u6001",name:"status"},{default:o(()=>[e(b,{value:l(n).status,"onUpdate:value":t[7]||(t[7]=a=>l(n).status=a),options:y.sys_job_status},null,8,["value","options"])]),_:1}),c("div",xe,[e(J,null,{default:o(()=>[e(v,{type:"dashed",danger:"",onClick:j},{default:o(()=>[Te]),_:1}),e(v,{type:"primary",loading:l(p),"html-type":"submitForm"},{default:o(()=>[Ie]),_:1},8,["loading"])]),_:1})])]),_:1},8,["model","rules"]),e(se,{ref_key:"showCron",ref:T,onOk:B},null,512)]),_:1},8,["title","visible"])}}};export{Se as default};
