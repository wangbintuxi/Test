import{l as _,r as Q,k as W,az as X,o as i,q as f,m as n,i as o,f as l,c as U,bD as q,x as c,t as C,F as R,s as Y,e as Z,be as V,I as ee,bH as ae,bI as se,E as le,D as oe,bf as ne,d7 as te,b3 as re}from"./index.bde4a40f.js";/* empty css              */import{_ as ue}from"./index.e162e362.js";import{e as B,f as de,h as ie}from"./user.c8045a38.js";import{_ as pe,F as me}from"./Form.9957df10.js";import{_ as _e}from"./Password.f10fa33a.js";import"./isPlainObject.46058b4b.js";const fe={class:"bottom-control"},ce=c("\u53D6\u6D88"),ve=c("\u4FDD\u5B58"),Ne={__name:"CreateForm",props:{deptOptions:{type:Array,required:!0},sys_user_sex:{type:Array,required:!0},sys_normal_disable:{type:Array,required:!0}},emits:["ok"],setup(v,{expose:O,emit:I}){const A=v,{proxy:T}=re(),h=_(),p=_(1),y=_([]),b=_([]),D=Q({formTitle:"",submitLoading:!1,form:{userId:void 0,shopIds:[],userName:void 0,nickName:void 0,password:void 0,phonenumber:void 0,status:"0",remark:void 0,postIds:[],roleIds:[]},open:!1,rules:{userName:[{required:!0,message:"\u7528\u6237\u8D26\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],nickName:[{required:!0,message:"\u7528\u6237\u6635\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],roleIds:[{required:!0,message:"\u7528\u6237\u89D2\u8272\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u7528\u6237\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],password:[{required:!0,message:"\u7528\u6237\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{min:5,max:20,message:"\u7528\u6237\u5BC6\u7801\u957F\u5EA6\u5FC5\u987B\u4ECB\u4E8E 5 \u548C 20 \u4E4B\u95F4",trigger:"blur"}]}}),{formTitle:k,submitLoading:m,form:e,open:d,rules:L}=W(D),w=()=>{h.value.resetFields(),d.value=!1,g()};X(()=>A.sys_normal_disable,(t,a)=>{console.log("n-o",t,a)});const g=()=>{p.value=1,e.value={userId:void 0,deptId:void 0,userName:void 0,nickName:void 0,password:void 0,phonenumber:void 0,email:void 0,sex:void 0,status:"0",remark:void 0,postIds:[],roleIds:[]},T.resetForm("formRef")},S=t=>{g(),p.value=1,B().then(a=>{y.value=a.posts,b.value=a.roles,d.value=!0})},$=t=>{g(),p.value=2;const a=t.userId;B(a).then(r=>{y.value=r.posts,b.value=r.roles,e.value=r.data,e.value.postIds=r.postIds,e.value.roleIds=r.roleIds,e.value.shopIds=r.shopIds,d.value=!0,k.value="\u4FEE\u6539\u7528\u6237\u57FA\u672C\u4FE1\u606F"})},z=t=>{m.value=!0,e.value.userId!==void 0&&e.value.userId!==null?de(e.value).then(a=>{V.success("\u4FEE\u6539\u6210\u529F",3),d.value=!1,I("ok")}).finally(()=>{m.value=!1}):ie(e.value).then(a=>{V.success("\u65B0\u589E\u6210\u529F",3),d.value=!1,I("ok")}).finally(()=>{m.value=!1})},E=t=>{console.error("\u6570\u636E\u9A8C\u8BC1\u5931\u8D25",t)},H=(...t)=>{console.warn("\u4EFB\u4E00\u8868\u5355\u9879\u88AB\u6821\u9A8C\u540E\u89E6\u53D1",t)};return O({handleAdd:S,handleUpdate:$}),(t,a)=>{const r=ee,u=pe,N=ae,F=se,j=_e,G=ue,J=le,x=oe,K=ne,M=me,P=te;return i(),f(P,{width:600,title:l(k),"label-col":4,"wrapper-col":14,visible:l(d),onClose:w},{default:n(()=>[o(M,{"label-col":{span:5},"wrapper-col":{span:18},ref_key:"formRef",ref:h,model:l(e),rules:l(L),onFinish:z,onValidate:H,onFinishFailed:E},{default:n(()=>[o(u,{label:"\u767B\u5F55\u8D26\u53F7",name:"userName"},{default:n(()=>[o(r,{value:l(e).userName,"onUpdate:value":a[0]||(a[0]=s=>l(e).userName=s),placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u8D26\u53F7"},null,8,["value"])]),_:1}),o(u,{label:"\u8054\u7CFB\u4EBA",name:"nickName"},{default:n(()=>[o(r,{value:l(e).nickName,"onUpdate:value":a[1]||(a[1]=s=>l(e).nickName=s),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA"},null,8,["value"])]),_:1}),o(u,{label:"\u95E8\u5E97",name:"shopIds"},{default:n(()=>[o(F,{value:l(e).shopIds,"onUpdate:value":a[2]||(a[2]=s=>l(e).shopIds=s),placeholder:"\u8BF7\u9009\u62E9",allowClear:"",mode:"multiple"},{default:n(()=>[(i(!0),U(R,null,q(v.deptOptions,s=>(i(),f(N,{value:s.shopId,key:s.shopId},{default:n(()=>[c(C(s.shopName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),o(u,{label:"\u8054\u7CFB\u65B9\u5F0F",name:"phonenumber"},{default:n(()=>[o(r,{value:l(e).phonenumber,"onUpdate:value":a[3]||(a[3]=s=>l(e).phonenumber=s),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u65B9\u5F0F"},null,8,["value"])]),_:1}),p.value===1?(i(),f(u,{key:0,label:"\u5BC6\u7801",name:"password"},{default:n(()=>[o(j,{value:l(e).password,"onUpdate:value":a[4]||(a[4]=s=>l(e).password=s),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["value"])]),_:1})):Y("",!0),o(u,{label:"\u89D2\u8272",name:"roleIds"},{default:n(()=>[o(F,{value:l(e).roleIds,"onUpdate:value":a[5]||(a[5]=s=>l(e).roleIds=s),placeholder:"\u8BF7\u9009\u62E9",allowClear:"",mode:"multiple"},{default:n(()=>[(i(!0),U(R,null,q(b.value,s=>(i(),f(N,{value:s.roleId,key:s.roleId},{default:n(()=>[c(C(s.roleName),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),o(u,{label:"\u72B6\u6001",name:"status"},{default:n(()=>[o(G,{value:l(e).status,"onUpdate:value":a[6]||(a[6]=s=>l(e).status=s),options:v.sys_normal_disable},null,8,["value","options"])]),_:1}),o(u,{label:"\u5907\u6CE8",name:"remark"},{default:n(()=>[o(J,{value:l(e).remark,"onUpdate:value":a[7]||(a[7]=s=>l(e).remark=s),type:"textarea",autoSize:{minRows:4,maxRows:6},"allow-clear":""},null,8,["value"])]),_:1}),Z("div",fe,[o(K,null,{default:n(()=>[o(x,{type:"dashed",danger:"",onClick:w},{default:n(()=>[ce]),_:1}),o(x,{type:"primary",loading:l(m),"html-type":"submitForm"},{default:n(()=>[ve]),_:1},8,["loading"])]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["title","visible"])}}};export{Ne as default};
