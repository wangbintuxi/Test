import{bg as y,l as _,bC as q,o as f,q as x,m as a,i as l,w as P,f as K,e as s,x as n,be as F,I as V,E as N,D as k,dk as R}from"./index.f356dcab.js";/* empty css              */import{C as W}from"./index.60bd41b9.js";import{_ as z,F as B}from"./Form.6e04adbe.js";import"./index.659db672.js";import"./isPlainObject.4b2dde9d.js";function D(){return y({url:"/config/getWxPayConfig",method:"get"})}function A(d){return y({url:"/config/updateWxPayConfig",method:"post",data:d})}const L=s("span",{class:"card-title"},"\u652F\u4ED8\u914D\u7F6E",-1),S=s("span",{class:"pl-10 text-xs text-warning"}," \u767B\u5F55\u5FAE\u4FE1\u5546\u6237(\u5730\u5740\uFF1Ahttps://pay.weixin.qq.com\uFF0C\u652F\u4ED8\u6388\u6743\u76EE\u5F55\u3001\u56DE\u8C03\u94FE\u63A5; http,https\u6700\u597D\u90FD\u914D\u7F6E) ",-1),j=s("div",{class:"mt-4 text-xs"},"\u53D7\u7406\u5546ID\uFF0C\u8EAB\u4EFD\u6807\u8BC6",-1),E=s("div",{class:"mt-4 text-xs"},[n(" \u5546\u6237\u652F\u4ED8\u5BC6\u94A5: "),s("span",{class:"text-danger"},"apiV3Key\u3002")],-1),H=s("div",{class:"mt-4 text-xs"},[n(" 1. \u5934\u90E8\u8981\u5305\u542Bhttp\u6216https\uFF0C\u4E14\u4E0D\u652F\u6301IP\u5730\u5740 "),s("br"),n(" 2. \u57DF\u540D\u5FC5\u987B\u901A\u8FC7ICP\u5907\u6848 "),s("br"),n(" 3. \u5F53\u516C\u4F17\u5E73\u53F0\u63A5\u5230\u626B\u7801\u652F\u4ED8\u8BF7\u6C42\u65F6\uFF0C\u4F1A\u56DE\u8C03\u6B64URL\u4F20\u9012\u8BA2\u5355\u4FE1\u606F "),s("br"),n(" 4. "),s("a",{href:"https://pay.weixin.qq.com/index.php/extend/pay_setting",target:"_blank"},[s("span",{class:"text-success"},"\u5FC5\u987B\u4E0E\u5546\u6237\u5E73\u53F0\u652F\u4ED8\u56DE\u8C03\u5730\u5740\u4E00\u81F4")])],-1),T=s("div",{class:"mt-4 text-xs"},[n(" \u5FAE\u4FE1\u652F\u4ED8\u8BC1\u4E66\uFF0C\u5728\u5FAE\u4FE1\u5546\u5BB6\u5E73\u53F0\u4E2D\u53EF\u4EE5\u4E0B\u8F7D\uFF01\u6587\u4EF6\u540D\u4E00\u822C\u4E3A "),s("span",{class:"text-danger"},"apiclient_cert.pem")],-1),$=s("div",{class:"mt-4 text-xs"},[n(" \u5FAE\u4FE1\u652F\u4ED8\u8BC1\u4E66\u5BC6\u94A5\uFF0C\u5728\u5FAE\u4FE1\u5546\u5BB6\u5E73\u53F0\u4E2D\u53EF\u4EE5\u4E0B\u8F7D\uFF01\u6587\u4EF6\u540D\u4E00\u822C\u4E3A: "),s("span",{class:"text-danger"},"apiclient_key.pem")],-1),G=n(" \u4FDD \u5B58 "),Z={__name:"wxpay",setup(d){let h=async(p,e)=>R(e)?Promise.resolve():Promise.reject("\u8BF7\u8F93\u5165\u6B63\u786E\u7684http\u6216\u8005https\u5730\u5740");const t=_({}),g={appId:[{required:!0,message:"\u8BF7\u8F93\u5165Appid!"}],mchId:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u6237\u53F7!"}],apiV3Key:[{required:!0,message:"\u8BF7\u8F93\u5165apiV3Key!"}],payNotifyUrl:[{required:!0,validator:h,message:"\u8BF7\u8F93\u5165\u652F\u4ED8\u56DE\u8C03\u5730\u5740!"}],privateCert:[{required:!0,message:"\u8BF7\u8F93\u5165\u5FAE\u4FE1\u652F\u4ED8\u8BC1\u4E66!"}],privateKey:[{required:!0,message:"\u8BF7\u8F93\u5165\u5FAE\u4FE1\u652F\u4ED8\u8BC1\u4E66\u5BC6\u94A5!"}]};let i=_(!1);function m(){D().then(({data:p}=response)=>{t.value=p})}const b=p=>{i.value=!0,A(t.value).then(e=>{F.success("\u4FDD\u5B58\u6210\u529F!"),i.value=!1,m()}).catch(e=>{i.value=!1})},C=p=>{i.value=!1};return m(),(p,e)=>{const u=V,r=z,c=N,v=W,I=k,w=B,U=q("hasPermi");return f(),x(w,{model:t.value,name:"basic",rules:g,labelCol:{xs:3,sm:5},"wrapper-col":{xs:14,sm:10},autocomplete:"off",onFinish:b,onFinishFailed:C},{default:a(()=>[l(v,{class:"card",size:"small"},{title:a(()=>[L,S]),default:a(()=>[l(r,{label:"\u5C0F\u7A0B\u5E8FappId",name:"appId"},{default:a(()=>[l(u,{value:t.value.appId,"onUpdate:value":e[0]||(e[0]=o=>t.value.appId=o),placeholder:"\u8BF7\u8F93\u5165Appid"},null,8,["value"])]),_:1}),l(r,{label:"\u5546\u6237\u53F7",name:"mchId"},{extra:a(()=>[j]),default:a(()=>[l(u,{value:t.value.mchId,"onUpdate:value":e[1]||(e[1]=o=>t.value.mchId=o),placeholder:"\u8BF7\u8F93\u5165\u5546\u6237\u53F7"},null,8,["value"])]),_:1}),l(r,{label:"\u5546\u6237\u652F\u4ED8\u5BC6\u94A5",name:"apiV3Key"},{extra:a(()=>[E]),default:a(()=>[l(u,{value:t.value.apiV3Key,"onUpdate:value":e[2]||(e[2]=o=>t.value.apiV3Key=o),placeholder:"\u8BF7\u8F93\u5165\u652F\u4ED8\u5546\u6237\u5BC6\u94A5"},null,8,["value"])]),_:1}),l(r,{label:"\u652F\u4ED8\u56DE\u8C03\u5730\u5740",name:"payNotifyUrl"},{extra:a(()=>[H]),default:a(()=>[l(u,{value:t.value.payNotifyUrl,"onUpdate:value":e[3]||(e[3]=o=>t.value.payNotifyUrl=o),placeholder:"\u8BF7\u8F93\u5165\u652F\u4ED8\u56DE\u8C03\u5730\u5740"},null,8,["value"])]),_:1}),l(r,{label:"\u5FAE\u4FE1\u652F\u4ED8\u8BC1\u4E66",name:"privateCert"},{extra:a(()=>[T]),default:a(()=>[l(c,{autoSize:{minRows:5,maxRows:8},value:t.value.privateCert,"onUpdate:value":e[4]||(e[4]=o=>t.value.privateCert=o),placeholder:"\u8BF7\u8F93\u5165\u5FAE\u4FE1\u652F\u4ED8\u8BC1\u4E66"},null,8,["value"])]),_:1}),l(r,{label:"\u5FAE\u4FE1\u652F\u4ED8\u8BC1\u4E66\u5BC6\u94A5",name:"privateKey"},{extra:a(()=>[$]),default:a(()=>[l(c,{autoSize:{minRows:5,maxRows:8},value:t.value.privateKey,"onUpdate:value":e[5]||(e[5]=o=>t.value.privateKey=o),placeholder:"\u8BF7\u8F93\u5165\u5FAE\u4FE1\u652F\u4ED8\u8BC1\u4E66\u5BC6\u94A5"},null,8,["value"])]),_:1})]),_:1}),l(v,{class:"card-btn",size:"small"},{default:a(()=>[P((f(),x(I,{type:"primary",loading:K(i),"html-type":"submit"},{default:a(()=>[G]),_:1},8,["loading"])),[[U,["config:wxpay:updateConfig"]]])]),_:1})]),_:1},8,["model"])}}};export{Z as default};
