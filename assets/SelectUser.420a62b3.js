import{G as W,l as d,r as X,k as Y,b2 as Z,bC as ee,o as b,q as w,m as t,i as e,f as l,bE as N,s as k,w as ne,e as te,x as I,b3 as oe,I as ae,D as se,bf as le,bK as ue,bL as re,M as ie}from"./index.bde4a40f.js";/* empty css               */import{_ as ce}from"./index.b299fc45.js";import"./index.e162e362.js";/* empty css              */import{u as pe,d as de}from"./role.a08d4cc5.js";import{_ as _e,F as me}from"./Form.9957df10.js";import{_ as fe,a as ge}from"./index.20aec7d3.js";import"./index.094c9c57.js";import"./RadioButton.41d4890b.js";import"./index.5d20d864.js";import"./Group.12a87c6f.js";import"./Search.26e235a2.js";import"./isPlainObject.46058b4b.js";import"./Password.f10fa33a.js";const ve=I(" \u641C\u7D22 "),he=I(" \u91CD\u7F6E "),ye=I(" \u6DFB\u52A0 "),be={class:"flex justify-end"},we=W({name:"SelectUser"}),Oe=Object.assign(we,{props:{roleId:{type:[Number,String]}},emits:["ok"],setup(x,{expose:z,emit:K}){const R=x,{proxy:_}=oe(),{sys_normal_disable:U}=_.useDict("sys_normal_disable"),m=d(!0),f=d([]),u=d(!1),g=d(0),q=X({selectedRowKeys:[],queryParams:{pageNum:1,pageSize:10,roleId:void 0,userName:void 0,phonenumber:void 0},columns:[{title:"\u767B\u5F55\u8D26\u53F7",dataIndex:"userName",ellipsis:!0,align:"center"},{title:"\u89D2\u8272",dataIndex:"email",ellipsis:!0,align:"center"},{title:"\u8054\u7CFB\u4EBA",dataIndex:"nickName",ellipsis:!0,align:"center"},{title:"\u8054\u7CFB\u65B9\u5F0F",dataIndex:"phonenumber",ellipsis:!0,align:"center"},{title:"\u64CD\u4F5C",dataIndex:"operation",width:"18%",scopedSlots:{customRender:"operation"},align:"center"}]}),{selectedRowKeys:r,queryParams:n,columns:j}=Y(q),B=()=>{n.value.roleId=R.roleId,i(),u.value=!0},D=()=>{F(),u.value=!1},F=()=>{r.value=[],f.value=[],g.value=0,n.value={pageNum:1,pageSize:10,roleId:void 0,userName:void 0,phonenumber:void 0},_.resetForm("queryRef")};function i(){m.value=!0,pe(n.value).then(a=>{f.value=a.rows,g.value=a.total,m.value=!1})}const c=()=>{n.value.pageNum=1,i()},L=()=>{_.resetForm("queryRef"),c()},O=(a,o)=>{n.value.pageSize=o,i()},P=(a,o)=>{n.value.pageNum=a,n.value.pageSize=o,i()},V=a=>{r.value=a};function A(){const a=n.value.roleId,o=r.value.join(",");if(o==""){message.warning("\u8BF7\u9009\u62E9\u8981\u5206\u914D\u7684\u7528\u6237");return}de({roleId:a,userIds:o}).then(p=>{message.success(p.msg),u.value=!1,K("ok")})}return z({show:B}),(a,o)=>{const p=ae,v=_e,h=fe,S=Z("c-icon"),y=se,M=le,Q=ge,$=me,E=ue,G=ce,T=re,H=ie,J=ee("hasPermi");return b(),w(H,{title:"\u9009\u62E9\u7528\u6237",visible:u.value,"onUpdate:visible":o[2]||(o[2]=s=>u.value=s),width:"800px",zIndex:1002,onOk:A,onCancel:D},{default:t(()=>[e($,{model:l(n),ref:"queryRef"},{default:t(()=>[e(Q,{gutter:48},{default:t(()=>[e(h,{span:"8"},{default:t(()=>[e(v,{label:"\u7528\u6237\u540D\u79F0",name:"userName"},{default:t(()=>[e(p,{value:l(n).userName,"onUpdate:value":o[0]||(o[0]=s=>l(n).userName=s),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0",clearable:"",onKeyup:N(c,["enter"])},null,8,["value","onKeyup"])]),_:1})]),_:1}),e(h,{span:"8"},{default:t(()=>[e(v,{label:"\u8054\u7CFB\u65B9\u5F0F",name:"phonenumber"},{default:t(()=>[e(p,{value:l(n).phonenumber,"onUpdate:value":o[1]||(o[1]=s=>l(n).phonenumber=s),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u65B9\u5F0F",clearable:"",onKeyup:N(c,["enter"])},null,8,["value","onKeyup"])]),_:1})]),_:1}),e(h,{span:"8"},{default:t(()=>[e(v,null,{default:t(()=>[e(M,null,{default:t(()=>[e(y,{type:"primary",onClick:c},{default:t(()=>[e(S,{type:"SearchOutlined"}),ve]),_:1}),e(y,{onClick:L},{default:t(()=>[e(S,{type:"SyncOutlined"}),he]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),e(G,{loading:m.value,rowKey:"userId",columns:l(j),"data-source":f.value,"row-selection":{selectedRowKeys:l(r),onChange:V},pagination:!1,scroll:{y:260}},{bodyCell:t(({column:s,record:C})=>[s.dataIndex==="status"?(b(),w(E,{key:0,options:l(U),value:C.status},null,8,["options","value"])):k("",!0),s.dataIndex==="operation"?ne((b(),w(y,{key:1,type:"link",danger:"",onClick:Ie=>a.addAuthUser(C)},{default:t(()=>[ye]),_:2},1032,["onClick"])),[[J,["system:role:add"]]]):k("",!0)]),_:1},8,["loading","columns","data-source","row-selection"]),te("div",be,[e(T,{class:"ant-table-pagination","show-size-changer":"","show-quick-jumper":"",current:l(n).pageNum,total:g.value,"page-size":l(n).pageSize,"show-total":s=>`\u5171 ${s} \u6761`,onShowSizeChange:O,onChange:P},null,8,["current","total","page-size","show-total"])])]),_:1},8,["visible"])}}});export{Oe as default};
