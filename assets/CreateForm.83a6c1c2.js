import{l as I,r as E,k as H,o as y,q as N,m as o,i as l,f as t,s as O,e as j,x,I as z,D as G,bf as J,d7 as K,b3 as M}from"./index.eed59c8a.js";/* empty css              */import{_ as P}from"./index.dc2e029d.js";import{_ as Q}from"./index.4efc3d67.js";import{_ as S}from"./index.ed5ffbcd.js";import{l as W,a as X,g as Y,u as Z,b as ee}from"./dept.3324d94f.js";import{_ as ae,F as te}from"./Form.ebe4e7a6.js";import"./isPlainObject.e1353217.js";const le={class:"bottom-control"},ne=x("\u53D6\u6D88"),oe=x("\u4FDD\u5B58"),fe={__name:"CreateForm",props:{sys_normal_disable:{type:Array,required:!0}},emits:["ok"],setup(F,{expose:k,emit:g}){const U=I(null),{proxy:m}=M(),_=I([]),w=E({formTitle:"",submitLoading:!1,form:{deptId:void 0,parentId:void 0,deptName:void 0,orderNum:0,leader:void 0,phone:void 0,email:void 0,status:"0"},formType:1,open:!1,rules:{parentId:[{required:!0,message:"\u4E0A\u7EA7\u90E8\u95E8\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],deptName:[{required:!0,message:"\u90E8\u95E8\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],orderNum:[{required:!0,message:"\u663E\u793A\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],email:[{type:"email",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740",trigger:["blur","change"]}],phone:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801",trigger:"blur"}]}}),{formTitle:f,submitLoading:p,form:e,formType:c,open:r,rules:C}=H(w),h=()=>{v(),r.value=!1},v=()=>{c.value=1,e.value={deptId:void 0,parentId:void 0,deptName:void 0,orderNum:0,leader:void 0,phone:void 0,email:void 0,status:"0"},m.resetForm("formRef")},T=d=>{v(),c.value=1,W().then(a=>{_.value=m.handleTree(a.data,"deptId")}),d!=null&&(e.value.parentId=d.deptId),r.value=!0,f.value="\u6DFB\u52A0\u90E8\u95E8"},D=d=>{v(),c.value=2;const a=d.deptId;X(d.deptId).then(u=>{_.value=m.handleTree(u.data,"deptId")}),Y(a).then(u=>{e.value=u.data,r.value=!0,f.value="\u4FEE\u6539\u90E8\u95E8"})},q=d=>{p.value=!0,e.value.deptId!==void 0&&e.value.deptId!==null?Z(e.value).then(a=>{message.success("\u4FEE\u6539\u6210\u529F",3),r.value=!1,g("ok")}).finally(()=>{p.value=!1}):ee(e.value).then(a=>{message.success("\u65B0\u589E\u6210\u529F",3),r.value=!1,g("ok")}).finally(()=>{p.value=!1})},B=d=>{console.error("\u6570\u636E\u9A8C\u8BC1\u5931\u8D25",d)};return k({handleAdd:T,handleUpdate:D}),(d,a)=>{const u=S,s=ae,i=z,R=Q,V=P,b=G,$=J,A=te,L=K;return y(),N(L,{width:600,title:t(f),"label-col":4,"wrapper-col":14,visible:t(r),onClose:h},{default:o(()=>[l(A,{"label-col":{span:5},"wrapper-col":{span:18},ref_key:"formRef",ref:U,model:t(e),rules:t(C),onFinish:q,onFinishFailed:B},{default:o(()=>[t(e).parentId!==0?(y(),N(s,{key:0,label:"\u4E0A\u7EA7\u90E8\u95E8",name:"parentId"},{default:o(()=>[l(u,{value:t(e).parentId,"onUpdate:value":a[0]||(a[0]=n=>t(e).parentId=n),style:{width:"100%"},"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":_.value,placeholder:"\u8BF7\u9009\u62E9","tree-default-expand-all":"","field-names":{children:"children",label:"deptName",value:"deptId"}},null,8,["value","tree-data"])]),_:1})):O("",!0),l(s,{label:"\u90E8\u95E8\u540D\u79F0",name:"deptName"},{default:o(()=>[l(i,{value:t(e).deptName,"onUpdate:value":a[1]||(a[1]=n=>t(e).deptName=n),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"},null,8,["value"])]),_:1}),l(s,{label:"\u663E\u793A\u987A\u5E8F",name:"orderNum"},{default:o(()=>[l(R,{style:{width:"100%"},value:t(e).orderNum,"onUpdate:value":a[2]||(a[2]=n=>t(e).orderNum=n),placeholder:"\u8BF7\u8F93\u5165\u663E\u793A\u987A\u5E8F"},null,8,["value"])]),_:1}),l(s,{label:"\u8D1F\u8D23\u4EBA",name:"leader"},{default:o(()=>[l(i,{value:t(e).leader,"onUpdate:value":a[3]||(a[3]=n=>t(e).leader=n),placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA"},null,8,["value"])]),_:1}),l(s,{label:"\u8054\u7CFB\u7535\u8BDD",name:"phone"},{default:o(()=>[l(i,{maxlength:11,value:t(e).phone,"onUpdate:value":a[4]||(a[4]=n=>t(e).phone=n),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD"},null,8,["value"])]),_:1}),l(s,{label:"\u90AE\u7BB1",name:"email"},{default:o(()=>[l(i,{value:t(e).email,"onUpdate:value":a[5]||(a[5]=n=>t(e).email=n),placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"},null,8,["value"])]),_:1}),l(s,{label:"\u90E8\u95E8\u72B6\u6001",name:"status"},{default:o(()=>[l(V,{value:t(e).status,"onUpdate:value":a[6]||(a[6]=n=>t(e).status=n),options:F.sys_normal_disable},null,8,["value","options"])]),_:1}),j("div",le,[l($,null,{default:o(()=>[l(b,{type:"dashed",danger:"",onClick:h},{default:o(()=>[ne]),_:1}),l(b,{type:"primary",loading:t(p),"html-type":"submitForm"},{default:o(()=>[oe]),_:1},8,["loading"])]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["title","visible"])}}};export{fe as default};
