import{_ as j,l as v,az as q,r as z,k as M,b2 as R,o as E,c as H,e as O,i as o,f as u,bF as I,m as i,q as L,s as U,x as A,cL as G,c5 as J,c6 as Q,cf as W,ch as X}from"./index.f356dcab.js";import{_ as Y}from"./Search.a244a5d8.js";import"./isPlainObject.4b2dde9d.js";const Z={class:"flex justify-between justify-center"},$=A("\u5C55\u5F00\u5168\u90E8"),ee=A("\u6298\u53E0\u5168\u90E8"),te={class:"example"},ne={__name:"DeptTree",props:{deptOptions:{type:Array,required:!0}},emits:["select"],setup(h,{emit:N}){const s=h,x=v(!0);q(()=>s.deptOptions,(e,t)=>{if(e.length>0){x.value=!1,f(s.deptOptions);const a=s.deptOptions,l=d.value.map(n=>p(n.id,a));c.value=l}});const K=v(null),g=v(!1),k=v("isAll"),D=z({replaceFields:{children:"children",title:"label",key:"id",value:"id"},deptNodes:[],expandedKeys:[],searchValue:"",autoExpandParent:!0,defaultExpandAll:!1}),{replaceFields:b,deptNodes:d,expandedKeys:c,searchValue:_,autoExpandParent:m,defaultExpandAll:V}=M(D),p=(e,t)=>{let a;for(let l=0;l<t.length;l++){const n=t[l];n.children&&(n.children.some(r=>r.id===e)?a=n.id:p(e,n.children)&&(a=p(e,n.children)))}return a},C=e=>{f(s.deptOptions);const t=e.target.value,a=s.deptOptions,l=d.value.map(n=>n.label.indexOf(t)>-1?p(n.id,a):null).filter((n,r,y)=>n&&y.indexOf(n)===r);_.value=t,c.value=l,m.value=!0,d.value=[]},w=e=>{if(k.value=e.key,e.key==="isAll"){f(s.deptOptions);const t=s.deptOptions,a=d.value.map(l=>p(l.id,t));c.value=a}else c.value=[];g.value=!g.value,d.value=[]},f=e=>{if(!e||e.length===0)return[];e.forEach(t=>(d.value.push({id:t.id,label:t.label}),f(t.children)))},P=(e,t)=>{N("select",e[0])},T=e=>{c.value=e,m.value=!1};return(e,t)=>{const a=Y,l=R("c-icon"),n=G,r=J,y=Q,B=W,F=X;return E(),H("div",null,[O("div",Z,[o(a,{value:u(_),"onUpdate:value":t[0]||(t[0]=S=>I(_)?_.value=S:null),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",onChange:C},null,8,["value"]),o(y,null,{overlay:i(()=>[o(r,{"selected-keys":[k.value],onClick:w},{default:i(()=>[o(n,{key:"isAll"},{default:i(()=>[$]),_:1}),o(n,{key:"noAll"},{default:i(()=>[ee]),_:1})]),_:1},8,["selected-keys"])]),default:i(()=>[o(l,{type:"MoreOutlined",style:{fontSize:"24px"}})]),_:1})]),x.value?U("",!0):(E(),L(B,{key:0,class:"pt-10",ref_key:"tree",ref:K,expandedKeys:u(c),autoExpandParent:u(m),defaultExpandAll:u(V),"default-expand-all":"","tree-data":h.deptOptions,fieldNames:u(b),onSelect:P,onExpand:T},null,8,["expandedKeys","autoExpandParent","defaultExpandAll","tree-data","fieldNames"])),O("div",te,[o(F,{spinning:x.value},null,8,["spinning"])])])}}};var oe=j(ne,[["__scopeId","data-v-dd68ea8c"]]);export{oe as default};
