import{_ as K,a as P,l as g,b2 as u,o as f,c as h,i as e,m as s,bE as y,q as R,e as n,s as I,cW as U,x as z,cX as B,cY as N,y as S,b4 as T,p as M,g as $,b3 as A}from"./index.b2a8007e.js";const x=d=>(M("data-v-07a0d418"),d=d(),$(),d),F={class:"register"},H=x(()=>n("h3",{class:"title"},"\u9EA6\u8DA3\u65B0\u8BED\u5EFA\u884C\u5BF9\u8D26\u7CFB\u7EDF",-1)),L={class:"register-code"},W=["src"],X={key:0},Y={key:1},j={style:{float:"right"}},D=z("\u4F7F\u7528\u5DF2\u6709\u8D26\u6237\u767B\u5F55"),G=x(()=>n("div",{class:"el-register-footer"},[n("span",null,"Copyright \xA9 2018-2022 ruoyi.vip All Rights Reserved.")],-1)),J={__name:"register",setup(d){const V=P(),{proxy:b}=A(),o=g({username:"",password:"",confirmPassword:"",code:"",uuid:""}),k={username:[{required:!0,trigger:"blur",message:"\u8BF7\u8F93\u5165\u60A8\u7684\u8D26\u53F7"},{min:2,max:20,message:"\u7528\u6237\u8D26\u53F7\u957F\u5EA6\u5FC5\u987B\u4ECB\u4E8E 2 \u548C 20 \u4E4B\u95F4",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"\u8BF7\u8F93\u5165\u60A8\u7684\u5BC6\u7801"},{min:5,max:20,message:"\u7528\u6237\u5BC6\u7801\u957F\u5EA6\u5FC5\u987B\u4ECB\u4E8E 5 \u548C 20 \u4E4B\u95F4",trigger:"blur"}],confirmPassword:[{required:!0,trigger:"blur",message:"\u8BF7\u518D\u6B21\u8F93\u5165\u60A8\u7684\u5BC6\u7801"},{required:!0,validator:(r,t,a)=>{o.value.password!==t?a(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4")):a()},trigger:"blur"}],code:[{required:!0,trigger:"change",message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}]},w=g(""),c=g(!1),p=g(!0);function _(){b.$refs.registerRef.validate(r=>{r&&(c.value=!0,B(o.value).then(t=>{const a=o.value.username;N.alert("<font color='red'>\u606D\u559C\u4F60\uFF0C\u60A8\u7684\u8D26\u53F7 "+a+" \u6CE8\u518C\u6210\u529F\uFF01</font>","\u7CFB\u7EDF\u63D0\u793A",{dangerouslyUseHTMLString:!0,type:"success"}).then(()=>{V.push("/login")}).catch(()=>{})}).catch(()=>{c.value=!1,p&&v()}))})}function v(){S().then(r=>{p.value=r.captchaEnabled===void 0?!0:r.captchaEnabled,p.value&&(w.value="data:image/gif;base64,"+r.img,o.value.uuid=r.uuid)})}return v(),(r,t)=>{const a=T,m=u("el-input"),i=u("el-form-item"),C=u("el-button"),q=u("router-link"),E=u("el-form");return f(),h("div",F,[e(E,{ref:"registerRef",model:o.value,rules:k,class:"register-form"},{default:s(()=>[H,e(i,{prop:"username"},{default:s(()=>[e(m,{modelValue:o.value.username,"onUpdate:modelValue":t[0]||(t[0]=l=>o.value.username=l),type:"text",size:"large","auto-complete":"off",placeholder:"\u8D26\u53F7"},{prefix:s(()=>[e(a,{"icon-class":"user",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),e(i,{prop:"password"},{default:s(()=>[e(m,{modelValue:o.value.password,"onUpdate:modelValue":t[1]||(t[1]=l=>o.value.password=l),type:"password",size:"large","auto-complete":"off",placeholder:"\u5BC6\u7801",onKeyup:y(_,["enter"])},{prefix:s(()=>[e(a,{"icon-class":"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue","onKeyup"])]),_:1}),e(i,{prop:"confirmPassword"},{default:s(()=>[e(m,{modelValue:o.value.confirmPassword,"onUpdate:modelValue":t[2]||(t[2]=l=>o.value.confirmPassword=l),type:"password",size:"large","auto-complete":"off",placeholder:"\u786E\u8BA4\u5BC6\u7801",onKeyup:y(_,["enter"])},{prefix:s(()=>[e(a,{"icon-class":"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue","onKeyup"])]),_:1}),p.value?(f(),R(i,{key:0,prop:"code"},{default:s(()=>[e(m,{size:"large",modelValue:o.value.code,"onUpdate:modelValue":t[3]||(t[3]=l=>o.value.code=l),"auto-complete":"off",placeholder:"\u9A8C\u8BC1\u7801",style:{width:"63%"},onKeyup:y(_,["enter"])},{prefix:s(()=>[e(a,{"icon-class":"validCode",class:"el-input__icon input-icon"})]),_:1},8,["modelValue","onKeyup"]),n("div",L,[n("img",{src:w.value,onClick:v,class:"register-code-img"},null,8,W)])]),_:1})):I("",!0),e(i,{style:{width:"100%"}},{default:s(()=>[e(C,{loading:c.value,size:"large",type:"primary",style:{width:"100%"},onClick:U(_,["prevent"])},{default:s(()=>[c.value?(f(),h("span",Y,"\u6CE8 \u518C \u4E2D...")):(f(),h("span",X,"\u6CE8 \u518C"))]),_:1},8,["loading","onClick"]),n("div",j,[e(q,{class:"link-type",to:"/login"},{default:s(()=>[D]),_:1})])]),_:1})]),_:1},8,["model"]),G])}}};var Z=K(J,[["__scopeId","data-v-07a0d418"]]);export{Z as default};
